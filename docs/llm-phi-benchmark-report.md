# LLM PHI åµæ¸¬ Benchmark å®Œæ•´å ±å‘Š

> **å ±å‘Šæ—¥æœŸ**: 2026-01-14  
> **æ¸¬è©¦ç’°å¢ƒ**: GPU Server via Ollama API (`192.168.1.2:30133`)  
> **å°ˆæ¡ˆç‰ˆæœ¬**: medical-deidentification v1.0  
> **æ¸¬è©¦ä»»å‹™**: é†«ç™‚æ–‡æœ¬ Protected Health Information (PHI) è‡ªå‹•è­˜åˆ¥

---

## ğŸ“‹ ç›®éŒ„

1. [åŸ·è¡Œæ‘˜è¦](#1-åŸ·è¡Œæ‘˜è¦)
2. [æ¸¬è©¦æ–¹æ³•è«–](#2-æ¸¬è©¦æ–¹æ³•è«–)
3. [Benchmark çµæœ](#3-benchmark-çµæœ)
4. [æ¨¡å‹è©³ç´°åˆ†æ](#4-æ¨¡å‹è©³ç´°åˆ†æ)
5. [çµæ§‹åŒ–è¼¸å‡ºé©—è­‰](#5-çµæ§‹åŒ–è¼¸å‡ºé©—è­‰)
6. [æ•ˆèƒ½èˆ‡æˆæœ¬åˆ†æ](#6-æ•ˆèƒ½èˆ‡æˆæœ¬åˆ†æ)
7. [çµè«–èˆ‡å»ºè­°](#7-çµè«–èˆ‡å»ºè­°)
8. [é™„éŒ„](#8-é™„éŒ„)

---

## 1. åŸ·è¡Œæ‘˜è¦

### 1.1 é—œéµç™¼ç¾

| ç™¼ç¾ | èªªæ˜ |
|------|------|
| ğŸ† **æœ€ä½³æ¨¡å‹** | `gemma3:27b` - è¤‡é›œæ¡ˆä¾‹ F1=89.9%ï¼Œçµæ§‹åŒ–è¼¸å‡º 100% æˆåŠŸ |
| âš ï¸ **é‡å¤§è­¦ç¤º** | ç°¡å–®æ¡ˆä¾‹ benchmark åš´é‡é«˜ä¼°æ¨¡å‹èƒ½åŠ›ï¼ˆå·®è·é” 60%+ï¼‰ |
| âœ… **çµæ§‹åŒ–è¼¸å‡º** | æ‰€æœ‰æ¸¬è©¦æ¨¡å‹å‡æ”¯æ´ Pydantic çµæ§‹åŒ–è¼¸å‡ºï¼ŒæˆåŠŸç‡ 100% |
| âŒ **ä¸æ¨è–¦æ¨¡å‹** | `phi4:14b` åœ¨è¤‡é›œæ¡ˆä¾‹å¤±æ•ˆï¼Œ`gpt-oss:20b` å®Œå…¨ç„¡æ³•ä½¿ç”¨ |

### 1.2 æœ€çµ‚æ¨è–¦é…ç½®

| ä½¿ç”¨å ´æ™¯ | æ¨è–¦æ¨¡å‹ | F1 Score | å»¶é² | ç†ç”± |
|----------|----------|----------|------|------|
| **ç”Ÿç”¢ç’°å¢ƒ** | `gemma3:27b` | 89.9% | ~10s | æœ€ä½³æ­£ç¢ºç‡ + ç©©å®šçµæ§‹åŒ–è¼¸å‡º |
| **å‚™é¸æ–¹æ¡ˆ** | `llama3.3:70b` | 92.0%* | ~9s | æ­£ç¢ºç‡ç•¥é«˜ä½†éœ€æ›´å¤šè³‡æº |
| **å¿«é€Ÿé è¦½** | `llama3.1:8b` | 61.2% | ~2s | é€Ÿåº¦å¿«ï¼Œé©åˆåˆç¯© |

> *llama3.3:70b æ•¸æ“šä¾†è‡ª V1 æ¸¬è©¦ï¼Œå°šæœªå®Œæˆ V2 çµæ§‹åŒ–è¼¸å‡ºé©—è­‰

---

## 2. æ¸¬è©¦æ–¹æ³•è«–

### 2.1 æ¸¬è©¦æ¶æ§‹

æœ¬æ¬¡ benchmark æ¡ç”¨å…©ç¨®æ¸¬è©¦æ¶æ§‹é€²è¡Œå°æ¯”ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Benchmark V1 (åŸºç¤æ¸¬è©¦)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  User â†’ httpx API â†’ Ollama â†’ JSON æ–‡å­— â†’ æ‰‹å‹•è§£æ â†’ æ¯”å°     â”‚
â”‚                                                              â”‚
â”‚  ç‰¹é»ï¼šç›´æ¥ API å‘¼å«ï¼ŒJSON è‡ªç”±æ ¼å¼è¼¸å‡º                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Benchmark V2 (å°ˆæ¡ˆæ¶æ§‹ - æ¨è–¦)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  User â†’ LangChain ChatOllama â†’ Structured Output â†’          â”‚
â”‚       â†’ PHIDetectionResponse (Pydantic) â†’ PHIEntity â†’ æ¯”å°   â”‚
â”‚                                                              â”‚
â”‚  ç‰¹é»ï¼šçµæ§‹åŒ–è¼¸å‡ºï¼Œé¡å‹å®‰å…¨ï¼Œå¯ç›´æ¥ç”¨æ–¼å¾ŒçºŒè™•ç†                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¸¬è©¦è³‡æ–™é›†

#### ç°¡å–®æ¡ˆä¾‹ (5 cases, 19 PHI)

| Case ID | æè¿° | PHI æ•¸é‡ | PHI é¡å‹ |
|---------|------|----------|----------|
| case_001 | åŸºæœ¬å…¥é™¢è³‡è¨Š | 4 | NAME, AGE, ID, DATE |
| case_002 | å¤šé¡å‹è­˜åˆ¥ | 4 | NAME, ID, PHONE, EMAIL |
| case_003 | åœ°å€é†«å¸«å | 4 | NAMEÃ—2, DATE, LOCATION |
| case_004 | è½‰è¨ºè³‡è¨Š | 4 | HOSPITAL, NAME, IDÃ—2 |
| case_005 | é«˜é½¡ç½•ç—… | 3 | AGE_OVER_89, NAME, RARE_DISEASE |

#### è¤‡é›œæ“¬çœŸæ¡ˆä¾‹ (5 cases, 108 PHI)

| Case ID | æè¿° | PHI æ•¸é‡ | ç‰¹æ®ŠæŒ‘æˆ° |
|---------|------|----------|----------|
| CASE-001 | é«˜é½¡æ‚£è€… (94æ­²) | 27 | å¤šé‡å¹´é½¡ã€æ­·å²æ—¥æœŸã€åºŠè™Ÿ |
| CASE-002 | ç½•è¦‹ç–¾ç—… (Huntington's) | 28 | å®¶æ—å²ã€ç–¾ç—…ç·¨è™Ÿã€å¤šé‡è¯çµ¡äºº |
| CASE-003 | å°å…’ç§‘ DMD | 30 | å®¶åº­æˆå“¡ã€å­¸æ ¡åœ°å€ã€å¤šé‡æ—¥æœŸ |
| CASE-004 | ç°¡åŒ–å°ç…§ | 9 | æ¨™æº–æ ¼å¼é©—è­‰ |
| CASE-005 | åœ‹éš›æ‚£è€… | 14 | è‹±æ–‡åã€è­·ç…§è™Ÿã€åœ‹éš›é›»è©± |

### 2.3 è©•ä¼°æŒ‡æ¨™

```
Precision = TP / (TP + FP)    # ç²¾ç¢ºç‡ï¼šåµæ¸¬åˆ°çš„æœ‰å¤šå°‘æ˜¯æ­£ç¢ºçš„
Recall    = TP / (TP + FN)    # å¬å›ç‡ï¼šæ‡‰è©²åµæ¸¬åˆ°çš„æœ‰å¤šå°‘è¢«åµæ¸¬åˆ°
F1 Score  = 2 Ã— (P Ã— R) / (P + R)  # ç¶œåˆæŒ‡æ¨™
```

---

## 3. Benchmark çµæœ

### 3.1 ç°¡å–®æ¡ˆä¾‹ vs è¤‡é›œæ¡ˆä¾‹å°æ¯”

| æ¨¡å‹ | ç°¡å–® F1 | è¤‡é›œ F1 | å·®è· | è©•åƒ¹ |
|------|---------|---------|------|------|
| gemma3:27b | 97.3% | **89.9%** | -7.4% | âœ… ç©©å®š |
| llama3.3:70b | 91.9% | 92.0% | +0.1% | âœ… ç©©å®š |
| llama3.1:8b | 84.8% | 61.2% | -23.6% | âš ï¸ ä¸‹é™æ˜é¡¯ |
| phi4:14b | 97.3% | 33.5% | **-63.8%** | âŒ åš´é‡é€€åŒ– |
| gpt-oss:20b | 94.7% | 0.0% | **-94.7%** | âŒ å®Œå…¨å¤±æ•— |

> âš ï¸ **é‡è¦ç™¼ç¾**ï¼šç°¡å–®æ¡ˆä¾‹çš„é«˜åˆ†æ•¸æœƒèª¤å°æ¨¡å‹é¸æ“‡ï¼å¿…é ˆä½¿ç”¨è¤‡é›œæ¡ˆä¾‹é€²è¡Œè©•ä¼°ã€‚

### 3.2 çµæ§‹åŒ–è¼¸å‡ºæ¸¬è©¦çµæœ (V2 æ¶æ§‹)

#### ç°¡å–®æ¡ˆä¾‹

| æ¨¡å‹ | F1 | Precision | Recall | å»¶é² | çµæ§‹åŒ–æˆåŠŸç‡ |
|------|-----|-----------|--------|------|-------------|
| **gemma3:27b** | **97.3%** | 100.0% | 94.7% | 10.49s | 100% |
| llama3.1:8b | 84.8% | 100.0% | 73.7% | 1.06s | 100% |
| phi4:14b | 66.7% | 90.9% | 52.6% | 2.56s | 100% |

#### è¤‡é›œæ“¬çœŸæ¡ˆä¾‹

| æ¨¡å‹ | F1 | Precision | Recall | å»¶é² | çµæ§‹åŒ–æˆåŠŸç‡ |
|------|-----|-----------|--------|------|-------------|
| **gemma3:27b** | **89.9%** | 92.7% | 87.3% | 9.89s | 100% |
| llama3.1:8b | 61.2% | 84.5% | 48.0% | 2.06s | 100% |

### 3.3 æ•ˆèƒ½åˆ†ä½ˆåœ–

```
F1 Score (è¤‡é›œæ¡ˆä¾‹)
100% â”¤
     â”‚
 90% â”¤ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ gemma3:27b (89.9%)
     â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ llama3.3:70b (92.0%)
 80% â”¤
     â”‚
 70% â”¤
     â”‚
 60% â”¤ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ llama3.1:8b (61.2%)
     â”‚
 50% â”¤
     â”‚
 40% â”¤
     â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ phi4:14b (33.5%)
 30% â”¤
     â”‚
 20% â”¤
     â”‚
 10% â”¤
     â”‚
  0% â”¤ gpt-oss:20b (0%)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## 4. æ¨¡å‹è©³ç´°åˆ†æ

### 4.1 gemma3:27b (æ¨è–¦)

**å„ªé»ï¼š**
- è¤‡é›œæ¡ˆä¾‹ F1=89.9%ï¼Œè¡¨ç¾ç©©å®š
- çµæ§‹åŒ–è¼¸å‡º 100% æˆåŠŸ
- æ­£ç¢ºè­˜åˆ¥å¤§å¤šæ•¸ PHI é¡å‹

**ç¼ºé»ï¼š**
- å»¶é²è¼ƒé•· (~10s)
- å¶çˆ¾æ¼åµã€ŒX-year-oldã€æ ¼å¼çš„å¹´é½¡
- å°è‹±æ–‡åï¼ˆå¦‚ "Chen", "Wang"ï¼‰è­˜åˆ¥ç‡è¼ƒä½

**å…¸å‹æ¼åµï¼š**
```
- "94-year-old" (å¹´é½¡æ ¼å¼)
- "Chen" (è‹±æ–‡å§“æ°)
- "Xiao-Ming" (æ‹¼éŸ³å)
- "é™³" (å–®å§“é†«å¸«)
```

### 4.2 llama3.3:70b (å‚™é¸)

**å„ªé»ï¼š**
- è¤‡é›œæ¡ˆä¾‹ F1=92.0%ï¼Œç•¥é«˜æ–¼ gemma3
- å°è¤‡é›œå¥å­çµæ§‹ç†è§£è¼ƒå¥½

**ç¼ºé»ï¼š**
- éœ€è¦æ›´å¤š GPU è³‡æº
- å°šæœªå®Œæˆ V2 çµæ§‹åŒ–è¼¸å‡ºé©—è­‰

### 4.3 llama3.1:8b (å¿«é€Ÿé è¦½)

**å„ªé»ï¼š**
- é€Ÿåº¦æ¥µå¿« (~2s)
- é©åˆåˆç¯©å¤§é‡æ–‡ä»¶

**ç¼ºé»ï¼š**
- è¤‡é›œæ¡ˆä¾‹ F1 åƒ… 61.2%
- Recall åƒ… 48%ï¼Œæ¼åµç‡è¶…é 50%
- ä¸é©åˆç”Ÿç”¢ç’°å¢ƒ

**å…¸å‹æ¼åµï¼š**
```
- å¤§é‡å¹´é½¡æ•¸å­— (15, 20, 65, 85...)
- æ—¥æœŸæ ¼å¼ (Nov 21, Nov 22, Nov 28...)
- è‹±æ–‡åå’Œåœ°é»
- ç½•è¦‹ç–¾ç—…åç¨±
```

### 4.4 phi4:14b (ä¸æ¨è–¦)

**å•é¡Œåˆ†æï¼š**

phi4 åœ¨ç°¡å–®æ¡ˆä¾‹è¡¨ç¾å„ªç•° (F1=97.3%)ï¼Œä½†åœ¨è¤‡é›œæ¡ˆä¾‹å´©æ½° (F1=33.5%)ã€‚

**æ ¹æœ¬åŸå› ï¼š** æ¨¡å‹å‚¾å‘æ“·å–æ•´æ®µå¥å­è€Œéç²¾ç¢º PHIï¼š

```json
// é æœŸè¼¸å‡º
{"text": "Mar 15, 2024", "type": "DATE"}

// phi4 å¯¦éš›è¼¸å‡º
{"text": "Started Tetrabenazine Mar 15, 2024 by Dr. å¼µç¥ç¶“ç§‘", "type": "DATE"}
```

### 4.5 gpt-oss:20b (ä¸å¯ç”¨)

åœ¨è¤‡é›œæ¡ˆä¾‹ä¸­å®Œå…¨ç„¡æ³•è¼¸å‡ºæœ‰æ•ˆ PHIï¼ŒF1=0%ã€‚

**å¯èƒ½åŸå› ï¼š**
- ä¸­æ–‡é†«ç™‚é ˜åŸŸè¨“ç·´ä¸è¶³
- çµæ§‹åŒ–è¼¸å‡ºèƒ½åŠ›å—é™

---

## 5. çµæ§‹åŒ–è¼¸å‡ºé©—è­‰

### 5.1 è¼¸å‡ºæ ¼å¼

ä½¿ç”¨å°ˆæ¡ˆ `PHIDetectionResponse` Pydantic æ¨¡å‹ï¼š

```python
class PHIDetectionResponse(BaseModel):
    entities: list[PHIIdentificationResult]
    total_entities: int
    has_phi: bool

class PHIIdentificationResult(BaseModel):
    entity_text: str          # PHI æ–‡å­—
    phi_type: PHIType         # é¡å‹ (enum)
    start_position: int       # èµ·å§‹ä½ç½®
    end_position: int         # çµæŸä½ç½®
    confidence: float         # ä¿¡å¿ƒåˆ†æ•¸
    reason: str               # è­˜åˆ¥åŸå› 
```

### 5.2 å¯¦éš›è¼¸å‡ºç¯„ä¾‹

```json
{
  "detected_entities": [
    {"text": "é™³è€å…ˆç”Ÿ", "type": "NAME"},
    {"text": "94", "type": "AGE_OVER_89"},
    {"text": "1930", "type": "DATE"},
    {"text": "02-2758-9999", "type": "PHONE"},
    {"text": "å°åŒ—å¸‚ä¿¡ç¾©å€", "type": "LOCATION"},
    {"text": "å°å¤§é†«é™¢", "type": "HOSPITAL_NAME"}
  ]
}
```

### 5.3 å¾ŒçºŒè™•ç†æ•´åˆ

```python
# çµæ§‹åŒ–è¼¸å‡ºå¯ç›´æ¥è½‰æ›ç‚ºé ˜åŸŸå¯¦é«”
response: PHIDetectionResponse = structured_llm.invoke(prompt)

for entity in response.entities:
    # è½‰æ›ç‚º PHIEntity é ˜åŸŸç‰©ä»¶
    phi_entity = entity.to_phi_entity()
    
    # å¯ç›´æ¥ç”¨æ–¼é®ç½©è™•ç†
    masker.mask(phi_entity)
```

---

## 6. æ•ˆèƒ½èˆ‡æˆæœ¬åˆ†æ

### 6.1 å»¶é²åˆ†æ

| æ¨¡å‹ | ç°¡å–®æ¡ˆä¾‹ | è¤‡é›œæ¡ˆä¾‹ | å†·å•Ÿå‹• |
|------|----------|----------|--------|
| llama3.1:8b | 1.06s | 2.06s | ~5s |
| phi4:14b | 2.56s | 3.89s | ~7s |
| gemma3:27b | 10.49s | 9.89s | ~37s |
| llama3.3:70b | 2.29s | 8.97s | ~10s |

### 6.2 è³‡æºéœ€æ±‚

| æ¨¡å‹ | åƒæ•¸é‡ | VRAM éœ€æ±‚ | æ¨è–¦é…ç½® |
|------|--------|-----------|----------|
| llama3.1:8b | 8B | ~5 GB | RTX 3060 |
| phi4:14b | 14B | ~9 GB | RTX 3090 |
| gemma3:27b | 27B | ~17 GB | RTX 4090 |
| llama3.3:70b | 70B | ~43 GB | A100 40GB |

### 6.3 æˆæœ¬æ•ˆç›Šåˆ†æ

| æ¨¡å‹ | F1 åˆ†æ•¸ | å»¶é² | è©•åˆ† |
|------|---------|------|------|
| gemma3:27b | 89.9% | 10s | â­â­â­â­â­ æœ€ä½³å¹³è¡¡ |
| llama3.3:70b | 92.0% | 9s | â­â­â­â­ æœ€é«˜æ­£ç¢ºç‡ä½†è³‡æºéœ€æ±‚é«˜ |
| llama3.1:8b | 61.2% | 2s | â­â­â­ é©åˆé è¦½ |
| phi4:14b | 33.5% | 4s | â­ ä¸æ¨è–¦ |

---

## 7. çµè«–èˆ‡å»ºè­°

### 7.1 æ¨¡å‹é¸æ“‡æ±ºç­–æ¨¹

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ éœ€è¦ PHI åµæ¸¬ï¼Ÿ  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ æœ‰ GPU è³‡æºï¼Ÿ   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         Yes â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ VRAM â‰¥ 17GBï¼Ÿ   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Yes â”‚         â”‚ No
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ gemma3:27b  â”‚ â”‚ llama3.1:8b â”‚
              â”‚ (F1=89.9%)  â”‚ â”‚ (F1=61.2%)  â”‚
              â”‚ ğŸ† æ¨è–¦     â”‚ â”‚ éœ€äººå·¥è¤‡æª¢  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ç”Ÿç”¢ç’°å¢ƒé…ç½®å»ºè­°

```yaml
# config/llm_config.yaml
production:
  provider: ollama
  model: gemma3:27b
  temperature: 0.0
  timeout: 120
  structured_output: true
  
fallback:
  provider: ollama
  model: llama3.1:8b
  # ç”¨æ–¼å¿«é€Ÿé è¦½æˆ– gemma3 ä¸å¯ç”¨æ™‚
```

### 7.3 å¾ŒçºŒå„ªåŒ–æ–¹å‘

1. **Prompt Engineering**
   - é‡å°ã€ŒX-year-oldã€å¹´é½¡æ ¼å¼å„ªåŒ–
   - å¢åŠ è‹±æ–‡åè­˜åˆ¥ç¯„ä¾‹

2. **Few-shot Learning**
   - åŠ å…¥ 2-3 å€‹ç¯„ä¾‹æå‡é‚Šç•Œæ¡ˆä¾‹æº–ç¢ºç‡

3. **Ensemble ç­–ç•¥**
   - gemma3 + llama3.3 é›™é‡ç¢ºèª
   - æå‡ Recall è‡³ 95%+

4. **Fine-tuning**
   - ä½¿ç”¨æ¨™è¨»è³‡æ–™å¾®èª¿è¼ƒå°æ¨¡å‹
   - ç›®æ¨™ï¼š8B æ¨¡å‹é”åˆ° 85%+ F1

---

## 8. é™„éŒ„

### 8.1 æ¸¬è©¦è…³æœ¬

| æª”æ¡ˆ | ç”¨é€” |
|------|------|
| `scripts/benchmark/llm_benchmark.py` | V1 åŸºç¤æ¸¬è©¦ |
| `scripts/benchmark/llm_benchmark_v2.py` | V2 çµæ§‹åŒ–è¼¸å‡ºæ¸¬è©¦ |
| `scripts/generators/generate_test_data_with_phi_tags.py` | æ¸¬è©¦è³‡æ–™ç”¢ç”Ÿå™¨ |

### 8.2 æ¸¬è©¦è³‡æ–™

| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `data/test/test_phi_tagged_cases.xlsx` | PHI æ¨™è¨˜æ¸¬è©¦è³‡æ–™ (108 PHI) |
| `data/output/benchmark_results.json` | V1 æ¸¬è©¦çµæœ |
| `data/output/benchmark_structured_results.json` | V2 æ¸¬è©¦çµæœ |

### 8.3 åŸ·è¡Œå‘½ä»¤

```bash
# ç°¡å–®æ¡ˆä¾‹æ¸¬è©¦ (V1)
python scripts/benchmark/llm_benchmark.py --models "llama3.1:8b,gemma3:27b"

# è¤‡é›œæ¡ˆä¾‹æ¸¬è©¦ (V1)
python scripts/benchmark/llm_benchmark.py --realistic --models "gemma3:27b"

# çµæ§‹åŒ–è¼¸å‡ºæ¸¬è©¦ (V2 - æ¨è–¦)
python scripts/benchmark/llm_benchmark_v2.py --models "gemma3:27b"

# è¤‡é›œæ¡ˆä¾‹ + çµæ§‹åŒ–è¼¸å‡º (V2 - æ¨è–¦)
python scripts/benchmark/llm_benchmark_v2.py --realistic --models "gemma3:27b"
```

### 8.4 PHI é¡å‹å°ç…§è¡¨

| é¡å‹ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| NAME | å§“å | é™³è€å…ˆç”Ÿã€John Smith |
| AGE | å¹´é½¡ (â‰¤89) | 45æ­²ã€28-year-old |
| AGE_OVER_89 | é«˜é½¡ (â‰¥90) | 94æ­²ã€92æ­² |
| DATE | æ—¥æœŸ | 2024-03-15ã€Nov 21 |
| PHONE | é›»è©± | 02-2758-9999 |
| EMAIL | é›»å­éƒµä»¶ | test@example.com |
| ID | èº«åˆ†è­‰/è­·ç…§ | A123456789 |
| MEDICAL_RECORD_NUMBER | ç—…æ­·è™Ÿ | M2024001234 |
| INSURANCE_NUMBER | å¥ä¿å¡è™Ÿ | A123456789 |
| LOCATION | åœ°å€ | å°åŒ—å¸‚ä¿¡ç¾©å€ |
| HOSPITAL_NAME | é†«é™¢åç¨± | å°å¤§é†«é™¢ |
| RARE_DISEASE | ç½•è¦‹ç–¾ç—… | Huntington's Disease |

---

## ç‰ˆæœ¬ç´€éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´ |
|------|------|------|
| 1.0 | 2026-01-14 | åˆç‰ˆå ±å‘Š |

---

*Report generated by medical-deidentification benchmark suite*

